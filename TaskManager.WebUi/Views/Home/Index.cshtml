<script src="~/js/components/taskForm.js" defer></script>
<script src="~/js/components/taskTable.js" defer></script>
<script src="~/js/components/validationSummary.js" defer></script>
<script src="~/js/taskApp.js" defer></script>

@{
    ViewData["Title"] = "Gerenciador de Tarefas";
}

<h2>@ViewData["Title"]</h2>

<div id="app" class="container mt-4">
    <!-- Componente de validação global -->
    <validation-summary :errors="validationErrors"></validation-summary>

    <!-- Formulário de nova tarefa -->
    <task-form :new-task="newTask"
               :validation-errors="validationErrors"
               :add-task="addTask"
               :formatted-created-at="formattedCreatedAt">
    </task-form>

    <!-- Filtros -->
    <div class="btn-group mb-3">
        <button class="btn btn-outline-secondary" v-on:click="filter = 'all'">Todas</button>
        <button class="btn btn-outline-warning" v-on:click="filter = 'pending'">Pendentes</button>
        <button class="btn btn-outline-success" v-on:click="filter = 'completed'">Concluídas</button>
    </div>

    <!-- Tabela de tarefas -->
    <task-table :sorted-tasks="sortedTasks"
                :editing-task="editingTask"
                :validation-errors="validationErrors"
                :edit-task="editTask"
                :save-task="saveTask"
                :delete-task="deleteTask"
                :complete-task="completeTask">
    </task-table>
</div>

<!-- Scripts -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://unpkg.com/vue@3.4.0/dist/vue.global.prod.js" defer></script>